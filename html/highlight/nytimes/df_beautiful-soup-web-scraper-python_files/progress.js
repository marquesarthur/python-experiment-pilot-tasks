(()=>{"use strict";class t extends Error{constructor(t,e){super(t),this.name="AjaxError",this.statusCode=e}}var e;e=()=>{const e=JSON.parse(document.getElementById("js-context").textContent);let o=0,n=1e-4;const r=new Map,s=[];for(let t=0;t<=100;t++)s.push(t/100);const c=new IntersectionObserver((t=>{for(const e of t){const t=e.boundingClientRect;if(t.bottom>=0&&t.top<=window.innerHeight){const o=t.top>0?window.innerHeight-t.top:t.bottom;r.set(e.target,o)}else r.set(e.target,0)}(()=>{let t=1,e=0;r.forEach((o=>{o>0&&(e=t),t++}));const s=r.size;var c;(c=e/s)!=o&&(o=c,c>n&&(n=c),i())})()}),{threshold:s});document.querySelectorAll(".article-body section").forEach((t=>{r.set(t,0),c.observe(t)}));const i=function(t,e,o){let n;return function(){const e=this,r=arguments,s=function(){n=null,t.apply(e,r)},c=o;clearTimeout(n),n=setTimeout(s,5e3),c&&t.apply(e,r)}}((function(){var n;e.api_article_progress_url&&(n={url:e.api_article_progress_url,data:{progress:o},onError:t=>{},onSuccess:t=>{}},fetch(n.url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":function(t){var e=null;if(document.cookie&&""!==document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var r=o[n].trim();if(r.substring(0,t.length+1)===t+"="){e=decodeURIComponent(r.substring(t.length+1));break}}return e}("csrftoken")},credentials:"same-origin",body:n.data?JSON.stringify(n.data):""}).then((e=>{if(!e.ok)throw new t(e.statusText,e.status);return e.json()})).then((t=>{n.onSuccess&&n.onSuccess(t)})).catch((t=>{n.onError&&n.onError(t)})))}))},"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e():document.addEventListener("DOMContentLoaded",e)})();